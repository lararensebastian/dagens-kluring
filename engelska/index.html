<!DOCTYPE html>
<html lang="sv">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Dagens engelskauppgift (IM)</title>
  <style>
    :root{
      --bg1:#2b153f; --bg2:#1e0f2e;
      --card:#140b24ee; --text:#f3f4f6; --muted:#c4b5fd;
      --accent:#a78bfa; --border:#3b1b5f;
      --shadow:0 20px 60px rgba(0,0,0,.45); --radius:18px;
    }
    *{box-sizing:border-box}
    body{
      margin:0; min-height:100vh;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color:var(--text);
      background:
        radial-gradient(1200px 600px at 20% 10%, rgba(167,139,250,.22), transparent 60%),
        radial-gradient(900px 500px at 80% 30%, rgba(236,72,153,.12), transparent 60%),
        linear-gradient(160deg, var(--bg1), var(--bg2));
      display:flex; align-items:center; justify-content:center;
      padding:24px;
    }
    .wrap{width:min(920px,100%)}
    .card{
      background:var(--card);
      border:1px solid var(--border);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      padding:28px;
      backdrop-filter: blur(10px);
    }
    header{
      display:flex; align-items:flex-start; justify-content:space-between;
      gap:16px; margin-bottom:18px;
    }
    h1{margin:0; font-size:22px; letter-spacing:.2px}
    .meta{ text-align:right; color:var(--muted); font-size:14px; line-height:1.4; white-space:nowrap; }
    .badge{
      display:inline-flex; gap:8px; align-items:center;
      padding:6px 10px; border:1px solid var(--border);
      border-radius:999px; color:var(--muted); font-size:13px; margin-top:8px;
    }
    .dot{
      width:8px;height:8px;border-radius:999px;background:var(--accent);
      box-shadow:0 0 0 4px rgba(167,139,250,.15);
    }
    .typeRow{
      display:flex; gap:10px; flex-wrap:wrap; margin:14px 0 10px;
      color:var(--muted); font-size:13px;
    }
    .pill{
      border:1px solid rgba(59,27,95,.75);
      background:rgba(2,6,23,.16);
      padding:6px 10px; border-radius:999px;
    }
    .task{
      font-size:19px; line-height:1.55;
      padding:16px; border-radius:14px;
      background:rgba(2,6,23,.20);
      border:1px solid rgba(59,27,95,.75);
      white-space:pre-wrap;
    }
    details{
      margin-top:12px;
      border:1px solid rgba(59,27,95,.75);
      border-radius:14px;
      background:rgba(2,6,23,.16);
      padding:12px 14px;
    }
    summary{ cursor:pointer; color:var(--muted); font-size:14px; list-style:none; }
    summary::-webkit-details-marker{display:none}
    .help{ margin-top:10px; font-size:15px; line-height:1.5; opacity:.95; white-space:pre-wrap; }
    .footer{
      margin-top:14px; display:flex; justify-content:space-between; gap:12px;
      color:var(--muted); font-size:13px; flex-wrap:wrap;
    }
    a{color:var(--muted); text-decoration:none}
    a:hover{text-decoration:underline}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <header>
        <div>
          <h1>Dagens engelskauppgift</h1>
          <div class="badge"><span class="dot"></span><span>IM · Lätt att komma igång · 5–10 min</span></div>
        </div>
        <div class="meta">
          <div id="dateText"></div>
          <div id="dayInfo"></div>
        </div>
      </header>

      <div class="typeRow">
        <div class="pill" id="typePill">Type: …</div>
        <div class="pill" id="timePill">Time: 5–10 min</div>
      </div>

      <div class="task" id="taskText">Loading…</div>

      <details>
        <summary>Visa lärarstöd</summary>
        <div class="help" id="helpText"></div>
      </details>

      <div class="footer">
        <div><a href="../">← Till ämnesval</a></div>
        <div id="seedInfo"></div>
      </div>
    </div>
  </div>

<script>
/* ---------- Date + seed ---------- */
function dayOfYear(date) {
  const start = new Date(date.getFullYear(), 0, 0);
  const diff = date - start;
  const oneDay = 24 * 60 * 60 * 1000;
  return Math.floor(diff / oneDay);
}
function mulberry32(seed) {
  return function() {
    let t = seed += 0x6D2B79F5;
    t = Math.imul(t ^ (t >>> 15), t | 1);
    t ^= t + Math.imul(t ^ (t >>> 7), t | 61);
    return ((t ^ (t >>> 14)) >>> 0) / 4294967296;
  };
}
function randInt(rng, min, max) { return Math.floor(rng() * (max - min + 1)) + min; }
function pick(rng, arr) { return arr[randInt(rng, 0, arr.length - 1)]; }

const today = new Date();
const y = today.getFullYear();
let doy = dayOfYear(today);
if (doy === 366) doy = 365;
const seed = y * 1000 + doy;
const rng = mulberry32(seed);

/* ---------- Types ---------- */
const TYPES = [
  { key:"quick",   label:"Quick talk/write", time:"5–10 min" },
  { key:"choose",  label:"Choose A or B",    time:"5–10 min" },
  { key:"grammar", label:"Grammar (easy)",   time:"5–10 min" },
  { key:"vocab",   label:"Word of the day",  time:"5–10 min" },
  { key:"fix",     label:"Fix the sentence", time:"5–10 min" },
  { key:"reading", label:"Mini reading",     time:"5–10 min" },
  { key:"practical",label:"Practical English",time:"5–10 min" },
];

/* ---------- Generators (IM-friendly) ---------- */
function makeQuick(rng){
  const topics = [
    "your weekend", "your morning", "a song you like", "a TV show you watch",
    "a place you want to visit", "something you are good at", "your phone habits"
  ];
  const t = pick(rng, topics);
  const frames = [
`Write 3 short sentences about ${t}.
Use these starters:
1) Today I…
2) I like / don’t like…
3) Because…`,
`Write 4 short sentences about ${t}.
Use: and / but / because (at least 2 of them).`,
`Write 3 sentences:
1) I usually…
2) Yesterday I…
3) Tomorrow I will…`
  ];
  return {
    type:"Quick talk/write",
    time:"5–10 min",
    q:pick(rng, frames),
    help:`Goal: get started fast.\nAccept short sentences.\nIf stuck: allow Swedish words inside the sentence and translate 1 key word.`
  };
}

function makeChoose(rng){
  const statements = [
    "School should start later.",
    "Homework is helpful.",
    "Phones should be away during lessons.",
    "It is better to study alone than in a group.",
    "AI tools can help students learn."
  ];
  const s = pick(rng, statements);
  return {
    type:"Choose A or B",
    time:"5–10 min",
    q:`Statement:\n${s}\n\nChoose A or B and complete the sentences:\nA) I agree because __________.\nB) I don’t agree because __________.\n\nThen add ONE more sentence:\nAnother reason is __________.`,
    help:`Keep it simple: 2–3 sentences is enough.\nIf needed: let them speak first, then write.`
  };
}

function makeGrammar(rng){
  const tasks = [
    {
      name:"Past tense (easy)",
      q:`Rewrite in past tense:\n1) I go to school.\n2) We eat lunch.\n3) She watches videos.\n\nBonus: Write ONE sentence about yesterday.`,
      help:`Support:\ngo→went, eat→ate, watch→watched (often +ed).\nOne correct sentence is a win.`
    },
    {
      name:"Questions",
      q:`Make questions:\n1) You like pizza.\n2) They are tired.\n3) He plays football.\n\nBonus: Write ONE question to a classmate.`,
      help:`Support:\nDo/Does…? Are…? What/Where/When…?\nExample: Do you like pizza?`
    },
    {
      name:"There is / There are",
      q:`Choose: there is / there are\n1) ____ a problem.\n2) ____ two chairs.\n3) ____ many people here.\n\nBonus: Write ONE sentence about this room.`,
      help:`there is + singular\nthere are + plural`
    },
    {
      name:"Comparatives",
      q:`Complete with the comparative:\n1) This is (easy) __________ than yesterday.\n2) My bag is (heavy) __________ than yours.\n3) This movie is (good) __________ than that one.\n\nBonus: Write ONE comparative sentence.`,
      help:`easy→easier, heavy→heavier, good→better`
    }
  ];
  const t = pick(rng, tasks);
  return { type:`Grammar: ${t.name}`, time:"5–10 min", q:t.q, help:t.help };
}

function makeVocab(rng){
  const words = [
    ["reliable","pålitlig"], ["exhausted","helt slut"], ["confident","självsäker"],
    ["improve","förbättra"], ["avoid","undvika"], ["curious","nyfiken"],
    ["choice","val"], ["challenge","utmaning"], ["notice","lägga märke till"],
    ["friendly","trevlig"], ["quiet","tyst"], ["important","viktig"]
  ];
  const w = pick(rng, words);
  const frame = pick(rng, [
`Word of the day:\n${w[0]} = ${w[1]}\n\nTask:\n1) Write the word.\n2) Choose ONE:\n   a) I feel ${w[0]} when __________.\n   b) I am not ${w[0]} when __________.\n3) Translate ONE sentence to Swedish.`,
`Word of the day:\n${w[0]} = ${w[1]}\n\nTask:\nWrite 3 short sentences with the word:\n1) I…\n2) You…\n3) We…`
  ]);
  return {
    type:"Word of the day",
    time:"5–10 min",
    q:frame,
    help:`Short is fine.\nIf stuck: give them 3 Swedish ideas, they translate ONE.`
  };
}

function makeFix(rng){
  const items = [
    {bad:"He go to school yesterday.", good:"He went to school yesterday."},
    {bad:"I am agree with you.", good:"I agree with you."},
    {bad:"She have a new phone.", good:"She has a new phone."},
    {bad:"We was late.", good:"We were late."},
    {bad:"I have 17 years.", good:"I am 17 years old."},
    {bad:"In the weekend I played.", good:"On the weekend I played."},
    {bad:"I very like music.", good:"I really like music."}
  ];
  const it = pick(rng, items);
  return {
    type:"Fix the sentence",
    time:"5–10 min",
    q:`Fix the sentence:\n${it.bad}\n\nTask:\n1) Write the correct sentence.\n2) What changed? (choose ONE)\n   - verb\n   - word order\n   - missing word\n   - wrong word`,
    help:`Suggested fix:\n${it.good}\nTip: accept “verb” as explanation if they can’t name the rule.`
  };
}

function makeReading(rng){
  const texts = [
    "Alex checked the time again. The bus was late. He looked at the sky and sighed.",
    "The classroom was quiet. A note was on the desk. No one wanted to touch it.",
    "Mina wanted to focus, but her phone buzzed. She took a deep breath and kept writing."
  ];
  const t = pick(rng, texts);
  const q = pick(rng, [
`Questions:\n1) What is happening?\n2) How does the person feel?\n3) Write ONE next sentence.`,
`Questions:\n1) Find one important word.\n2) What will happen next? (one sentence)\n3) Write a title (3–6 words).`,
`Questions:\n1) What is the problem?\n2) Copy one sentence from the text.\n3) Rewrite that sentence in easier English.`
  ]);
  return {
    type:"Mini reading",
    time:"5–10 min",
    q:`Text:\n${t}\n\n${q}`,
    help:`Keep answers short.\nIf needed: let them answer Q1 in Swedish, then translate 1 sentence.`
  };
}

function makePractical(rng){
  const situations = [
    "You are late. Write a message to your teacher.",
    "You want to ask for help in class.",
    "You want to order food at a café.",
    "You need to ask for directions.",
    "You want to say no politely."
  ];
  const s = pick(rng, situations);
  const frames = [
`Situation:\n${s}\n\nTask:\nWrite 2–3 short sentences.\nUse at least ONE of these:\n- please\n- sorry\n- can you…?\n- I need…`,
`Situation:\n${s}\n\nTask:\nChoose A or B:\nA) Write a short message (2–3 lines).\nB) Write a short dialogue (4 lines).`
  ];
  return {
    type:"Practical English",
    time:"5–10 min",
    q:pick(rng, frames),
    help:`Let them use a template.\nFocus on communication, not perfect grammar.`
  };
}

/* ---------- Choose + generate ---------- */
const chosen = pick(rng, TYPES);
let task;
if (chosen.key === "quick") task = makeQuick(rng);
else if (chosen.key === "choose") task = makeChoose(rng);
else if (chosen.key === "grammar") task = makeGrammar(rng);
else if (chosen.key === "vocab") task = makeVocab(rng);
else if (chosen.key === "fix") task = makeFix(rng);
else if (chosen.key === "practical") task = makePractical(rng);
else task = makeReading(rng);

/* ---------- Render ---------- */
const months = ["januari","februari","mars","april","maj","juni","juli","augusti","september","oktober","november","december"];
document.getElementById("dateText").textContent =
  `${today.getDate()} ${months[today.getMonth()]} ${today.getFullYear()}`;
document.getElementById("dayInfo").textContent = `Dag ${doy} av 365`;
document.getElementById("seedInfo").textContent =
  `Kod: ${y}-${String(today.getMonth()+1).padStart(2,"0")}-${String(today.getDate()).padStart(2,"0")}`;

document.getElementById("typePill").textContent = `Type: ${task.type}`;
document.getElementById("timePill").textContent = `Time: ${task.time}`;
document.getElementById("taskText").textContent = task.q;
document.getElementById("helpText").textContent = task.help;
</script>
</body>
</html>
